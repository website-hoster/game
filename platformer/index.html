<!doctype html><html><head><meta charset="utf-8"/><title>Platformer</title><meta name="viewport" content="width=device-width,initial-scale=1" /><link rel="stylesheet" href="../../style.css" /><style>canvas{display:block;margin:12px auto;border-radius:10px;background:linear-gradient(#112,#081);}</style></head><body>
<header class="header"><div class="brand"><h1>Platformer</h1><p class="sub">Collect 5 gems to win</p></div><div class="hdr-actions"><button class="btn ghost" onclick="location.href='../../index.html'">Back</button></div></header>
<canvas id="p" width="900" height="420"></canvas>
<script>
const canvas=document.getElementById('p'), ctx=canvas.getContext('2d');
let keys={}; document.addEventListener('keydown',e=>keys[e.key]=true); document.addEventListener('keyup',e=>delete keys[e.key]);
const world = { gravity:0.9, player:{x:50,y:300,w:28,h:40,vx:0,vy:0,onGround:false,score:0}, platforms:[], gems:[] };
world.platforms.push({x:0,y:380,w:900,h:40});
world.platforms.push({x:120,y:300,w:140,h:16});
world.platforms.push({x:320,y:250,w:140,h:16});
world.platforms.push({x:560,y:200,w:140,h:16});
world.platforms.push({x:760,y:120,w:120,h:16});
world.gems.push({x:160,y:260,got:false});
world.gems.push({x:360,y:210,got:false});
world.gems.push({x:600,y:160,got:false});
world.gems.push({x:800,y:80,got:false});
world.gems.push({x:420,y:330,got:false});
function rect(a,b){ return a.x < b.x+b.w && a.x+a.w > b.x && a.y < b.y+b.h && a.y+a.h > b.y; }
function update(){
  const p=world.player;
  if(keys['a']) p.vx=-3.2; else if(keys['d']) p.vx=3.2; else p.vx*=0.85;
  if(keys['w'] && p.onGround){ p.vy=-13; p.onGround=false; }
  p.vy += world.gravity*0.35; p.x += p.vx; p.y += p.vy;
  p.onGround=false;
  world.platforms.forEach(pl=>{
    if(rect(p,pl)){
      if(p.vy>0 && p.y + p.h - p.vy <= pl.y + 4){ p.y = pl.y - p.h; p.vy = 0; p.onGround=true;}
      else if(p.vy<0 && p.y >= pl.y+pl.h-4){ p.y = pl.y+pl.h; p.vy = 0; }
      else if(p.vx>0) p.x = pl.x - p.w;
      else if(p.vx<0) p.x = pl.x + pl.w;
    }
  });
  world.gems.forEach(g=>{ if(!g.got && (p.x+ p.w/2 > g.x-12 && p.x+ p.w/2 < g.x+12 && p.y+ p.h/2 > g.y-12 && p.y+ p.h/2 < g.y+12)){ g.got=true; p.score++; } });
  if(p.score >= world.gems.length) { setTimeout(()=>{ alert('You win!'); world.player.score=0; world.gems.forEach(g=>g.got=false); p.x=50;p.y=300; }, 50); }
}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#071427'; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#274156'; world.platforms.forEach(pl=> ctx.fillRect(pl.x,pl.y,pl.w,pl.h));
  world.gems.forEach(g=>{ if(!g.got){ ctx.fillStyle='#ffd166'; ctx.beginPath(); ctx.arc(g.x,g.y,8,0,Math.PI*2); ctx.fill(); } });
  const p=world.player; ctx.fillStyle='#06b6d4'; ctx.fillRect(p.x,p.y,p.w,p.h);
  ctx.fillStyle='#cfeffd'; ctx.font='16px Inter'; ctx.fillText(`Gems: ${p.score}/${world.gems.length}`,16,24);
}
function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>
</body></html>
