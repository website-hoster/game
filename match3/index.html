<!doctype html><html><head><meta charset="utf-8"/><title>Match-3</title><meta name="viewport" content="width=device-width,initial-scale=1" /><link rel="stylesheet" href="../../style.css" />
<style>#board{width:380px;margin:18px auto;display:grid;grid-template-columns:repeat(8,1fr);gap:6px}.tile{width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#012;font-weight:700;cursor:pointer;user-select:none}.score{color:#cfeffd;text-align:center;margin-top:6px}</style></head><body>
<header class="header"><div class="brand"><h1>Match-3</h1><p class="sub">Match 3+ to score</p></div><div class="hdr-actions"><button class="btn ghost" onclick="location.href='../../index.html'">Back</button></div></header>
<main class="container"><div id="board"></div><div class="score" id="score">Score: 0</div></main>
<script>
const colors=['#ffd166','#06b6d4','#7c3aed','#ff6b6b','#7ee787','#ffa8a8'];
const rows=8, cols=8;
let board=[], score=0, boardEl=document.getElementById('board'), scoreEl=document.getElementById('score'), sel=null;
function rndCol(){ return colors[Math.floor(Math.random()*colors.length)]; }
function idx(r,c){ return r*cols + c; }
function build(){ board=[]; for(let r=0;r<rows;r++){ for(let c=0;c<cols;c++){ board.push({r,c,color:rndCol()}); }} render(); resolveInitial(); }
function render(){ boardEl.innerHTML=''; board.forEach(cell=>{ const d=document.createElement('div'); d.className='tile'; d.style.background=cell.color; d.dataset.r=cell.r; d.dataset.c=cell.c; d.addEventListener('click',()=>tap(cell)); boardEl.appendChild(d); }); scoreEl.textContent='Score: '+score; }
function tap(cell){ if(!sel){ sel=cell; highlight(cell); return; } if(sel.r===cell.r && sel.c===cell.c){ sel=null; render(); return; } if(Math.abs(sel.r-cell.r)+Math.abs(sel.c-cell.c)===1){ swap(sel,cell); if(!findMatches().length){ swap(sel,cell); } else { applyMatches(); } } sel=null; render(); }
function highlight(cell){ render(); const tiles=document.querySelectorAll('.tile'); tiles.forEach(t=>{ if(t.dataset.r==cell.r && t.dataset.c==cell.c){ t.style.outline='3px solid rgba(255,255,255,0.18)'; } }); }
function swap(a,b){ const ia=idx(a.r,a.c), ib=idx(b.r,b.c); const tmp=board[ia].color; board[ia].color=board[ib].color; board[ib].color=tmp; }
function findMatches(){ const matches=[]; for(let r=0;r<rows;r++){ let run=[board[idx(r,0)]]; for(let c=1;c<cols;c++){ if(board[idx(r,c)].color===run[run.length-1].color) run.push(board[idx(r,c)]); else { if(run.length>=3) matches.push([...run]); run=[board[idx(r,c)]]; } } if(run.length>=3) matches.push([...run]); } for(let c=0;c<cols;c++){ let run=[board[idx(0,c)]]; for(let r=1;r<rows;r++){ if(board[idx(r,c)].color===run[run.length-1].color) run.push(board[idx(r,c)]); else { if(run.length>=3) matches.push([...run]); run=[board[idx(r,c)]]; } } if(run.length>=3) matches.push([...run]); } return matches; }
function applyMatches(){ const matches=findMatches(); if(!matches.length) return; let removed=0; matches.forEach(group=>{ group.forEach(cell=>{ board[idx(cell.r,cell.c)].color=null; removed++; }); }); score += removed*10; for(let c=0;c<cols;c++){ let col = []; for(let r=rows-1;r>=0;r--){ col.push(board[idx(r,c)].color); } col = col.filter(Boolean); while(col.length<rows) col.push(rndCol()); for(let r=rows-1;r>=0;r--){ board[idx(r,c)].color = col[rows-1-r]; } } render(); setTimeout(() => { if(findMatches().length) applyMatches(); }, 200); }
function resolveInitial(){ if(findMatches().length){ applyMatches(); } }
build();
</script></body></html>
